(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{731:function(t,e,o){t.exports=o.p+"img/659a8bf.png"},732:function(t,e,o){t.exports=o.p+"img/ec0bdff.png"},733:function(t,e,o){t.exports=o.p+"img/89eedb7.png"},734:function(t,e,o){t.exports=o.p+"img/bcb1e7f.png"},735:function(t,e,o){t.exports=o.p+"img/e33d511.png"},736:function(t,e,o){var content=o(756);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(52).default)("2f3b307d",content,!0,{sourceMap:!1})},741:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCIgY2xhc3M9IiI+PGc+PGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik0yNTYsMEMxNTMuNzU1LDAsNzAuNTczLDgzLjE4Miw3MC41NzMsMTg1LjQyNmMwLDEyNi44ODgsMTY1LjkzOSwzMTMuMTY3LDE3My4wMDQsMzIxLjAzNSAgICBjNi42MzYsNy4zOTEsMTguMjIyLDcuMzc4LDI0Ljg0NiwwYzcuMDY1LTcuODY4LDE3My4wMDQtMTk0LjE0NywxNzMuMDA0LTMyMS4wMzVDNDQxLjQyNSw4My4xODIsMzU4LjI0NCwwLDI1NiwweiBNMjU2LDI3OC43MTkgICAgYy01MS40NDIsMC05My4yOTItNDEuODUxLTkzLjI5Mi05My4yOTNTMjA0LjU1OSw5Mi4xMzQsMjU2LDkyLjEzNHM5My4yOTEsNDEuODUxLDkzLjI5MSw5My4yOTNTMzA3LjQ0MSwyNzguNzE5LDI1NiwyNzguNzE5eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBkYXRhLW9sZF9jb2xvcj0iIzRkZTY4MCIgZmlsbD0iIzRkZTY4MCIvPg0KCTwvZz4NCjwvZz48L2c+IDwvc3ZnPg0K"},745:function(t,e,o){var content=o(783);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(52).default)("b1fd48a0",content,!0,{sourceMap:!1})},746:function(t,e,o){var content=o(785);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(52).default)("0a6f8cd3",content,!0,{sourceMap:!1})},754:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxLjYzNiA1MS42MzYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxLjYzNiA1MS42MzY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIGNsYXNzPSIiPjxnPjxwYXRoIGQ9Ik01MS4zNTMsMC45MTRjLTAuMjk1LTAuMzA1LTAuNzUtMC4zOS0xLjEzNS0wLjIxM0wwLjU4MywyMy40ODFjLTAuMzk5LDAuMTg0LTAuNjMyLDAuNjA1LTAuNTc0LDEuMDQxICBzMC4zOTMsMC43ODIsMC44MjYsMC44NTRsMjIuMjYzLDMuNzMxbDIuNTQ1LDIxLjAzOGMwLjA1NCwwLjQzOCwwLjM4OSwwLjc5MSwwLjgyNCwwLjg2NWMwLjA1NywwLjAxLDAuMTEzLDAuMDE1LDAuMTY5LDAuMDE1ICBjMC4zNzUsMCwwLjcyNi0wLjIxMSwwLjg5Ni0wLjU1NmwyNC00OC40MTVDNTEuNzIsMS42NzUsNTEuNjQ4LDEuMjE4LDUxLjM1MywwLjkxNHoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiM0MjNlMzciIGZpbGw9IiM0MjNlMzciLz48L2c+IDwvc3ZnPgo="},755:function(t,e,o){"use strict";var n=o(736);o.n(n).a},756:function(t,e,o){(t.exports=o(51)(!1)).push([t.i,".expand-map-button-index{border:none;background-color:hsla(0,0%,100%,.9);color:grey;position:absolute;bottom:30px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:1;padding:5px 30px}body,html{overflow-y:hidden}.index-map{width:100%;height:calc(100vh - 60px)}.get-location-button{bottom:190px}.back-to-index-button,.get-location-button{position:absolute;right:10px;z-index:1;border:1px solid grey;width:45px;height:45px;padding:10px}.back-to-index-button{top:10px;background-color:#fff}.get-location-button img{width:100%;height:100%}.map-container h1{font-size:16px;font-weight:700;display:inline-block;margin-right:5px;margin-bottom:0;height:27px}.clear-info-window-button{position:absolute;top:5px;right:10px;font-weight:700;cursor:pointer}.address{margin:10px 0}.google-map-button{color:#44ad47;border-radius:5px;padding:5px 20px;border:1px solid;font-size:12px;display:block;margin:auto}.type{color:#9fa0a0;font-size:13px;margin:0}.map-container{padding:0;margin:60px 0 0;max-width:unset}.map-container>.row,.map-container>.row>div{margin:0;padding:0}p.recommend{color:#ee5593;font-weight:700;display:flex;align-items:center}.recommend img{width:unset;margin-right:5px}p.type{display:block;color:rgba(0,0,0,.4);font-size:13px}.info-window-container{display:flex;justify-content:space-between;margin-bottom:5px}.info-window-container h1{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.info-window-container h1:hover{color:#44ad47}@media screen and (max-width:1250px){.index-map{height:calc(60vh - 116px)}.map-container{margin-top:116px}.get-location-button{top:10px;bottom:unset}}.gmap-info-window-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.gm-style-iw.gm-style-iw-c h1{font-size:20px}.gm-style-iw.gm-style-iw-c{padding:0;height:80px;font-family:微軟正黑體}",""])},762:function(t,e,o){"use strict";o(75);var n=o(35),r=(o(741),o(133),o(738)),c=o(740),l={components:{ImageHandler:r.a,Navbar:c.a},data:function(){return{zoomLevel:14,centerForSync:Object(n.a)({},this.$store.center),waitForCentering:!0}},mounted:function(){var t=this;setTimeout(function(){t.waitForCentering=!1},500)},computed:{visiableItemArray:function(){var map=[];for(var t in this.$store.state.sourceData.types){var e=this.$store.state.sourceData.types[t];e.checked&&map.push(e.value)}return map},shops:function(){return this.$store.state.shops},center:function(){return this.waitForCentering?{lng:121.5147601,lat:25.047819}:this.$store.state.center},selectedShop:function(){return this.$store.state.shop},types:function(){return this.$store.state.sourceData.types}},props:{mapSettings:{type:Object,default:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0,disableDefaultUi:!1,streetViewControlOptions:{position:8},zoomControlOptions:{position:8}}},backToIndexButtonClass:{type:String,default:""}},methods:{mapClick:function(t){this.$refs.myMap.mapObject._zoom<15&&alert("需要再縮小")},markerClick:function(t,e){this.$store.commit("markerOnClick",e),this.$store.commit("setShop",t)},markerOver:function(t){t.sourceTarget.setOpacity(1)},markerOut:function(t){t.sourceTarget.setOpacity(.5)},setShop:function(){var t=window.open(this.selectedShop.google_map_link,"_blank");t&&t.focus&&t.focus()},getIcon:function(t){return this.$store.state.sourceData.types[t].icon||""},initPageNum:function(){this.$store.commit("initPageNum")},getUserLocation:function(){this.$store.dispatch("getUserLocation"),this.$store.state.userLocation&&this.$store.dispatch("getNearbyShops")},clearSelectedShop:function(){this.$store.commit("setShop",{})},updateCenter:function(t){this.centerForSync={lat:t.lat(),lng:t.lng()}},dragEnd:function(){this.$store.commit("setCenter",this.centerForSync)},backToIndex:function(){switch($nuxt.$route.name){case"map":case"index-map":$nuxt.$router.push("/");break;case"shop-map":this.selectedShop.objectID?$nuxt.$router.push("/shop?objectID=".concat(this.selectedShop.objectID)):$nuxt.$router.push("/")}}}},d=(o(755),o(12)),component=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"map-container"},[n("b-row",[n("b-col",{staticClass:"map",attrs:{lg:"12"}},[t._t("default"),t._v(" "),n("button",{staticClass:"get-location-button",on:{click:t.getUserLocation}},[n("img",{attrs:{src:o(754)}})]),t._v(" "),n("mq-layout",{attrs:{mq:"lg"}},[n("button",{class:["back-to-index-button",t.backToIndexButtonClass],on:{click:t.backToIndex}},[t._v("✖")])]),t._v(" "),n("no-ssr",[n("gmap-map",{staticClass:"index-map",attrs:{center:t.center,zoom:t.zoomLevel,"map-type-id":"roadmap",options:t.mapSettings},on:{center_changed:t.updateCenter,dragend:t.dragEnd}},[t._l(t.shops,function(e,o){return n("gmap-marker",{key:o,attrs:{position:{lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},clickable:!0,draggable:!1,icon:{url:t.getIcon(e.type?e.type[0]:0),scaledSize:t.selectedShop&&e.objectID===t.selectedShop.objectID?{width:67,height:79}:{width:55,height:65}}},on:{click:function(n){return t.markerClick(e,o)}}})}),t._v(" "),n("gmap-info-window",{staticStyle:{width:"100px"},attrs:{options:{pixelOffset:{width:5,height:-65}},opened:null!==t.selectedShop&&Object.getOwnPropertyNames(t.selectedShop).length>1,position:{lat:+t.selectedShop.latitude||0,lng:+t.selectedShop.longitude||0}},on:{closeclick:function(t){}}},[n("div",{staticClass:"info-window-container"},[n("span",{staticClass:"clear-info-window-button",on:{click:t.clearSelectedShop}},[t._v("✖")]),t._v(" "),t.selectedShop.photo0||t.selectedShop.facebook_avatar?n("ImageHandler",{attrs:{src:t.selectedShop.photo0||t.selectedShop.facebook_avatar,containerStyle:{width:"120px",height:"80px",overflow:"hidden",position:"relative"},alt:t.selectedShop.name,onClick:t.setShop}}):t._e(),t._v(" "),n("div",{staticStyle:{padding:"10px","min-width":"160px"}},[n("h1",{on:{click:t.setShop}},[n("a",{attrs:{href:"javascript:void"},on:{click:t.setShop}},[t._v(t._s(t.selectedShop.name))])]),t._v(" "),n("br"),t._v(" "),n("p",{staticStyle:{"margin-top":"5px","font-size":"14px"}},[t._l(t.selectedShop.type,function(e,o){return t.selectedShop.type&&t.types[t.selectedShop.type[0]]?n("span",[t._v(t._s(t.types[e].text+(o===t.selectedShop.type.length-1?"":", ")))]):t._e()}),t._v(" "),n("span",{staticStyle:{float:"right",color:"#4de680","font-weight":"bold"}},[t._v(t._s(t.selectedShop.open_status&&t.selectedShop.open_status.type?t.selectedShop.open_status.text:""))])],2)])],1)])],2)],1)],2)],1)],1)},[],!1,null,null,null);e.a=component.exports},769:function(t,e,o){"use strict";var n=o(738),r=o(763),c=o(764),l=o.n(c),d=o(765),h=o.n(d),m=o(766),x=o.n(m),w=o(767),f=o.n(w),y=o(768),v=o.n(y),M={components:{ImageHandler:n.a,VClamp:r.a},computed:{types:function(){return this.$store.state.sourceData.types},altPlaceholders:function(){return[l.a,h.a,x.a,f.a,v.a]}},props:{shop:{type:Object,default:{}},containerStyle:{type:Object,default:function(){return{}}},isMarkerClicked:{type:Boolean,default:!1}},methods:{setShop:function(){this.$store.commit("setShop",this.shop);var t=window.open(this.shop.google_map_link,"_blank");t&&t.focus&&t.focus()}}},I=(o(782),o(12)),component=Object(I.a)(M,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shopItem-container",class:{isMarkerClicked:t.isMarkerClicked},staticStyle:{},on:{click:t.setShop}},[n("div",{staticClass:"shopItem-main"},[n("ImageHandler",{attrs:{src:t.shop.photo0||t.shop.facebook_avatar,alt:t.shop.name,altPlaceholders:t.altPlaceholders}})],1),t._v(" "),n("div",{staticClass:"shopItem-aside"},[n("div",{staticStyle:{width:"100%"}},[n("div",{staticClass:"recommend-container"},[t.shop.is_recommended?n("p",{staticClass:"recommend"},[n("img",{attrs:{src:o(747),height:"20",width:"20"}}),t._v(" 精選店家")]):t._e()]),t._v(" "),n("h3",{on:{click:t.setShop}},[n("a",{attrs:{href:"javascript:void"},on:{click:t.setShop}},[n("v-clamp",{attrs:{autoresize:"","max-lines":1}},[t._v(t._s(t.shop.name))])],1)]),t._v(" "),n("p",{staticClass:"type"},[t._l(t.shop.type,function(e,o){return t.shop.type&&t.types[t.shop.type[0]]?n("span",[t._v("\n                    "+t._s(t.shop.open_status&&t.shop.open_status.type?" ‧ ":"")+"\n                    "+t._s(t.types[e].text+(o===t.shop.type.length-1?"":", "))+"\n                ")]):t._e()}),t._v(" "),n("span",{staticClass:"running-status"},[t._v(t._s(t.shop.open_status&&t.shop.open_status.type?t.shop.open_status.text:""))])],2),t._v(" "),n("mq-layout",{staticClass:"img",attrs:{mq:"lg"}},[n("p",{staticClass:"shopItem-description"},[n("v-clamp",{attrs:{autoresize:"","max-lines":2}},[t._v(t._s(t.shop.description))])],1)])],1)])])},[],!1,null,"1505ad24",null);e.a=component.exports},782:function(t,e,o){"use strict";var n=o(745);o.n(n).a},783:function(t,e,o){(t.exports=o(51)(!1)).push([t.i,".shopItem-container[data-v-1505ad24]{padding:0;cursor:pointer;min-width:450px;margin:5px}.shopItem-container:hover a[data-v-1505ad24]{color:#44ad47}.shopItem-main[data-v-1505ad24]{overflow:hidden}.shopItem-main img[data-v-1505ad24]{width:100%;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.shopItem-container h3[data-v-1505ad24]{font-weight:700;font-size:16px;display:inline-block}.shopItem-aside[data-v-1505ad24]{padding:10px}.shopItem-description[data-v-1505ad24]{min-height:45px}.shopItem-container .type[data-v-1505ad24]{border-bottom:1px solid #d3d3d3;padding-bottom:5px;margin-bottom:5px}.shopItem-container .recommend-container[data-v-1505ad24]{min-height:21px}.shopItem-container .recommend[data-v-1505ad24]{justify-content:flex-end}.shopItem-container .description[data-v-1505ad24],.shopItem-container .recommend[data-v-1505ad24],.shopItem-container .type[data-v-1505ad24]{font-size:14px}.description[data-v-1505ad24]{min-height:28px}.running-status[data-v-1505ad24]{color:#44ad47}.shopItem-container[data-v-1505ad24]{display:flex;flex-direction:row}.shopItem-main[data-v-1505ad24]{width:35%;display:flex}.shopItem-aside[data-v-1505ad24]{width:65%;display:flex;background-color:#fff}.isMarkerClicked[data-v-1505ad24]{border-top:5px solid #44ad47}@media screen and (max-width:1250px){.shopItem-container[data-v-1505ad24]{min-width:200px;flex-direction:column}.shopItem-main[data-v-1505ad24]{width:100%;height:130px}.shopItem-aside[data-v-1505ad24]{width:100%}.shopItem-container .type[data-v-1505ad24]{border-bottom:none}}",""])},784:function(t,e,o){"use strict";var n=o(746);o.n(n).a},785:function(t,e,o){(t.exports=o(51)(!1)).push([t.i,".index-map-shop-list-container{position:fixed;overflow-x:auto;width:100vw;bottom:0;display:flex;flex-direction:row}.index-map-shop-list{margin:0;width:100%;display:flex;flex-direction:row}.no-result-placeholder{text-align:center}.no-result-placeholder img{width:30%;margin:30px auto;display:block}@media screen and (max-width:1250px){.shopList{height:unset;padding:10px}}",""])},786:function(t,e,o){var content=o(828);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(52).default)("2befc372",content,!0,{sourceMap:!1})},799:function(t,e,o){"use strict";var n=o(769),r=o(743),c=o(739),l=o(731),d=o.n(l),h=o(732),m=o.n(h),x=o(733),w=o.n(x),f=o(734),y=o.n(f),v=o(735),M=o.n(v),I={components:{MapShopItem:n.a,Sidebar:r.a},data:function(){return{mascots:[d.a,m.a,w.a,y.a,M.a]}},props:{shops:{type:Array,default:[]}},methods:{onScroll:Object(c.a)(function(t){var e=t.target;e.scrollLeft>=e.scrollWidth-1e3&&this.$store.state.pageNum<Math.ceil(this.shops.length/20)&&this.$store.commit("addPageNum")},1e3)}},S=(o(784),o(12)),component=Object(S.a)(I,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"scroll",rawName:"v-scroll",value:this.onScroll,expression:"onScroll"}],staticClass:"index-map-shop-list-container"},[this.shops.length>0?e("ul",{staticClass:"index-map-shop-list"},this._l(this.shops.slice(0,20*this.$store.state.pageNum),function(t,o){return e("MapShopItem",{attrs:{shop:t}})}),1):this._e()])},[],!1,null,null,null);e.a=component.exports},827:function(t,e,o){"use strict";var n=o(786);o.n(n).a},828:function(t,e,o){(t.exports=o(51)(!1)).push([t.i,".index-map-container .index-map{height:100vh;width:100vw;overflow:hidden}.index-map-container .map-container{margin-top:0}.index-map-container .recommend{justify-content:flex-start}p{margin:0}li{list-style-type:none}@media screen and (max-width:1250px){.index-map{height:calc(100vh - 116px)}.index-map-container .map-container{margin-top:115px}}",""])},866:function(t,e,o){"use strict";o.r(e);var n=o(740),r=o(799),c=o(762),l={head:function(){return{bodyAttrs:{class:"overflow-hidden"},htmlAttrs:{class:"overflow-hidden"}}},components:{IndexMapShopList:r.a,Map:c.a,Navbar:n.a},computed:{shops:function(){return this.$store.state.shops}}},d=(o(827),o(12)),component=Object(d.a)(l,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"index-map-container"},[e("mq-layout",{attrs:{mq:"md"}},[e("Navbar")],1),this._v(" "),e("Map"),this._v(" "),e("IndexMapShopList",{attrs:{shops:this.shops}})],1)},[],!1,null,null,null);e.default=component.exports}}]);