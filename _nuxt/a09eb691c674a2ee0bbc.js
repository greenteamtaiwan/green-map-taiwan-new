(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{587:function(e,t,n){e.exports=n.p+"img/659a8bf.png"},588:function(e,t,n){e.exports=n.p+"img/ec0bdff.png"},589:function(e,t,n){e.exports=n.p+"img/89eedb7.png"},590:function(e,t,n){e.exports=n.p+"img/bcb1e7f.png"},591:function(e,t,n){e.exports=n.p+"img/e33d511.png"},604:function(e,t,n){"use strict";let o=null;let r=null;function l(e,t={}){let n=document.createElement(e);return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function c(e,t,n){return(window.getComputedStyle(e,n||null)||{display:"none"})[t]}function d(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};let t=e;for(;t!==document;){if("none"===c(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var h='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}';let _=0,style=null;function f(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=function(){let{rendered:e,detached:t}=d(this);e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(w(this),this.addEventListener("scroll",m,!0)),this.__resize_rendered__=e,x(this))}.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){let{offsetWidth:t,offsetHeight:n}=e,o=new ResizeObserver(()=>{(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==t||e.offsetHeight!==n))&&x(e)}),{detached:r,rendered:l}=d(e);e.__resize_observer_triggered__=!1===r&&!1===l,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){x(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(_||(style=function(e){var style=document.createElement("style");return style.type="text/css",style.styleSheet?style.styleSheet.cssText=e:style.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(style),style}(h)),function(e){let t=c(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};let n=l("div",{className:"resize-triggers"}),o=l("div",{className:"resize-expand-trigger"}),r=l("div"),d=l("div",{className:"resize-contract-trigger"});o.appendChild(r),n.appendChild(o),n.appendChild(d),e.appendChild(n),e.__resize_triggers__={triggers:n,expand:o,expandChild:r,contract:d},w(e),e.addEventListener("scroll",m,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=d(e).rendered,window.MutationObserver){let t=new MutationObserver(e.__resize_mutation_handler__);t.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=t}e.__resize_listeners__.push(t),_++}function m(){var e,t;w(this),this.__resize_raf__&&(e=this.__resize_raf__,r||(r=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),r(e)),this.__resize_raf__=(t=(()=>{let e=function(e){let{width:t,height:n}=e.__resize_last__,{offsetWidth:o,offsetHeight:r}=e;return o!==t||r!==n?{width:o,height:r}:null}(this);e&&(this.__resize_last__=e,x(this))}),o||(o=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),o(t))}function x(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach(t=>{t.call(e)})}function w(e){let{expand:t,expandChild:n,contract:o}=e.__resize_triggers__,{scrollWidth:r,scrollHeight:l}=o,{offsetWidth:c,offsetHeight:d,scrollWidth:h,scrollHeight:_}=t;o.scrollLeft=r,o.scrollTop=l,n.style.width=c+1+"px",n.style.height=d+1+"px",t.scrollLeft=h,t.scrollTop=_}const z=["maxLines","maxHeight","ellipsis","isClamped"],y=["tag","text","autoresize"];t.a={name:"vue-clamper",props:{tag:{type:String,default:"div"},autoresize:{type:Boolean,default:!1},maxLines:Number,maxHeight:[String,Number],ellipsis:{type:String,default:"…"},expanded:Boolean},data(){return{offset:null,text:this.getText(),localExpanded:!!this.expanded}},computed:{clampedText(){return this.text.slice(0,this.offset)+this.ellipsis},isClamped(){return!!this.text&&this.offset!==this.text.length},realText(){return this.isClamped?this.clampedText:this.text},realMaxHeight(){if(this.localExpanded)return null;let{maxHeight:e}=this;return e?"number"==typeof e?`${e}px`:e:null}},watch:{expanded(e){this.localExpanded=e},localExpanded(e){e?this.clampAt(this.text.length):this.update(),this.expanded!==e&&this.$emit("update:expanded",e)}},mounted(){this.init(),y.forEach(e=>{this.$watch(e,this.init)}),z.forEach(e=>{this.$watch(e,this.update)})},updated(){this.text=this.getText(),this.applyChange()},beforeDestroy(){this.cleanUp()},methods:{init(){if(this.$slots.default){if(this.offset=this.text.length,this.cleanUp(),this.autoresize){let e=()=>{this.update()};f(this.$el,e),this.unregisterResizeCallback=(()=>{!function(e,t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);let n=e.__resize_listeners__;n&&(n.splice(n.indexOf(t),1),n.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",m),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null),!--_&&style&&style.parentNode.removeChild(style))}(this.$el,e)})}this.update()}},update(){this.localExpanded||(this.applyChange(),(this.isOverflow()||this.isClamped)&&this.search())},expand(){this.localExpanded=!0},collapse(){this.localExpanded=!1},toggle(){this.localExpanded=!this.localExpanded},isOverflow(){if(!this.maxLines&&!this.maxHeight)return!1;if(this.maxLines){if(this.$refs.content.getClientRects().length>this.maxLines)return!0}return!!(this.maxHeight&&this.$el.scrollHeight>this.$el.offsetHeight)},getText(){let[content]=(this.$slots.default||[]).filter(e=>!e.tag&&!e.isComment);return content?content.text:""},moveEdge(e){this.clampAt(this.offset+e)},clampAt(e){this.offset=e,this.applyChange()},applyChange(){this.$refs.text.textContent=this.realText},stepToFit(){this.fill(),this.clamp()},fill(){for(;!this.isOverflow()&&this.offset<this.text.length;)this.moveEdge(1)},clamp(){for(;this.isOverflow()&&this.offset>0;)this.moveEdge(-1)},search(...e){let[t=0,n=this.offset]=e;if(n-t<=3)return void this.stepToFit();let o=Math.floor((n+t)/2);this.clampAt(o),this.isOverflow()?this.search(t,o):this.search(o,n)},cleanUp(){this.unregisterResizeCallback&&this.unregisterResizeCallback()}},render(e){let t=[e("span",{ref:"text",attrs:{"aria-label":this.text.trim()}},this.realText)],{expand:n,collapse:o,toggle:r}=this,l={expand:n,collapse:o,toggle:r,clamped:this.isClamped,expanded:this.localExpanded},c=this.$scopedSlots.before?this.$scopedSlots.before(l):this.$slots.before;c&&t.unshift(...Array.isArray(c)?c:[c]);let d=this.$scopedSlots.after?this.$scopedSlots.after(l):this.$slots.after;d&&t.push(...Array.isArray(d)?d:[d]);let h=[e("span",{style:{boxShadow:"transparent 0 0"},ref:"content"},t)];return e(this.tag,{style:{maxHeight:this.realMaxHeight,overflow:"hidden"}},h)}}},609:function(e,t,n){var o=n(15),r=n(47),l=n(22),c=n(610),d="["+c+"]",h=RegExp("^"+d+d+"*"),_=RegExp(d+d+"*$"),f=function(e,t,n){var r={},d=l(function(){return!!c[e]()||"​"!="​"[e]()}),h=r[e]=d?t(m):c[e];n&&(r[n]=h),o(o.P+o.F*d,"String",r)},m=f.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(h,"")),2&t&&(e=e.replace(_,"")),e};e.exports=f},610:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},616:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCIgY2xhc3M9IiI+PGc+PGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik0yNTYsMEMxNTMuNzU1LDAsNzAuNTczLDgzLjE4Miw3MC41NzMsMTg1LjQyNmMwLDEyNi44ODgsMTY1LjkzOSwzMTMuMTY3LDE3My4wMDQsMzIxLjAzNSAgICBjNi42MzYsNy4zOTEsMTguMjIyLDcuMzc4LDI0Ljg0NiwwYzcuMDY1LTcuODY4LDE3My4wMDQtMTk0LjE0NywxNzMuMDA0LTMyMS4wMzVDNDQxLjQyNSw4My4xODIsMzU4LjI0NCwwLDI1NiwweiBNMjU2LDI3OC43MTkgICAgYy01MS40NDIsMC05My4yOTItNDEuODUxLTkzLjI5Mi05My4yOTNTMjA0LjU1OSw5Mi4xMzQsMjU2LDkyLjEzNHM5My4yOTEsNDEuODUxLDkzLjI5MSw5My4yOTNTMzA3LjQ0MSwyNzguNzE5LDI1NiwyNzguNzE5eiIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBkYXRhLW9sZF9jb2xvcj0iIzRkZTY4MCIgZmlsbD0iIzRkZTY4MCIvPg0KCTwvZz4NCjwvZz48L2c+IDwvc3ZnPg0K"},625:function(e,t,n){"use strict";var o=n(11),r=n(41),l=n(48),c=n(273),d=n(98),h=n(22),_=n(99).f,f=n(146).f,m=n(18).f,x=n(609).trim,w=o.Number,z=w,y=w.prototype,M="Number"==l(n(145)(y)),v="trim"in String.prototype,I=function(e){var t=d(e,!1);if("string"==typeof t&&t.length>2){var n,o,r,l=(t=v?t.trim():x(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+t}for(var code,c=t.slice(2),i=0,h=c.length;i<h;i++)if((code=c.charCodeAt(i))<48||code>r)return NaN;return parseInt(c,o)}}return+t};if(!w(" 0o1")||!w("0b1")||w("+0x1")){w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(M?h(function(){y.valueOf.call(n)}):"Number"!=l(n))?c(new z(I(t)),n,w):I(t)};for(var N,S=n(19)?_(z):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;S.length>L;L++)r(z,N=S[L])&&!r(w,N)&&m(w,N,f(z,N));w.prototype=y,y.constructor=w,n(27)(o,"Number",w)}},650:function(e,t,n){"use strict";var o=n(15),r=n(274)(6),l="findIndex",c=!0;l in[]&&Array(1)[l](function(){c=!1}),o(o.P+o.F*c,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(100)(l)},664:function(e,t,n){var content=n(734);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(40).default)("2f3b307d",content,!0,{sourceMap:!1})},691:function(e,t,n){"use strict";n(49);var o=n(26),r=(n(616),n(101),n(594)),l=n(597),c={components:{ImageHandler:r.a,Navbar:l.a},data:function(){return{zoomLevel:14,centerForSync:Object(o.a)({},this.$store.center),waitForCentering:!0}},mounted:function(){var e=this;setTimeout(function(){e.waitForCentering=!1},500)},computed:{visiableItemArray:function(){var map=[];for(var e in this.$store.state.sourceData.types){var t=this.$store.state.sourceData.types[e];t.checked&&map.push(t.value)}return map},shops:function(){return this.$store.state.shops},center:function(){return this.waitForCentering?{lng:121.5147601,lat:25.047819}:this.$store.state.center},selectedShop:function(){return this.$store.state.shop},types:function(){return this.$store.state.sourceData.types}},props:{mapSettings:{type:Object,default:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0,disableDefaultUi:!0,fullscreenControlOptions:{position:3},streetViewControlOptions:{position:7},zoomControlOptions:{position:7}}},backToIndexButtonClass:{type:String,default:""}},methods:{mapClick:function(e){this.$refs.myMap.mapObject._zoom<15&&alert("需要再縮小")},markerClick:function(e,t){this.$store.commit("markerOnClick",t),this.$store.commit("setShop",e)},markerOver:function(e){e.sourceTarget.setOpacity(1)},markerOut:function(e){e.sourceTarget.setOpacity(.5)},setShop:function(){var e=window.open(this.selectedShop.google_map_link,"_blank");e&&e.focus&&e.focus()},getIcon:function(e){return this.$store.state.sourceData.types[e].icon||""},initPageNum:function(){this.$store.commit("initPageNum")},getUserLocation:function(){this.$store.dispatch("getUserLocation"),this.$store.state.userLocation&&this.$store.dispatch("getNearbyShops")},clearSelectedShop:function(){this.$store.commit("setShop",{})},updateCenter:function(e){this.centerForSync={lat:e.lat(),lng:e.lng()}},dragEnd:function(){this.$store.commit("setCenter",this.centerForSync)},backToIndex:function(){switch($nuxt.$route.name){case"map":case"index-map":$nuxt.$router.push("/");break;case"shop-map":this.selectedShop.objectID?$nuxt.$router.push("/shop?objectID=".concat(this.selectedShop.objectID)):$nuxt.$router.push("/")}}}},d=(n(733),n(10)),component=Object(d.a)(c,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-container",{staticClass:"map-container"},[o("b-row",[o("b-col",{staticClass:"map",attrs:{lg:"12"}},[e._t("default"),e._v(" "),o("button",{staticClass:"get-location-button",on:{click:e.getUserLocation}},[o("img",{attrs:{src:n(732)}})]),e._v(" "),o("mq-layout",{attrs:{mq:"lg"}},[o("button",{class:["back-to-index-button",e.backToIndexButtonClass],on:{click:e.backToIndex}},[e._v("✖")])]),e._v(" "),o("no-ssr",[o("gmap-map",{staticClass:"index-map",attrs:{center:e.center,zoom:e.zoomLevel,"map-type-id":"roadmap",options:e.mapSettings},on:{center_changed:e.updateCenter,dragend:e.dragEnd}},[e._l(e.shops,function(t,n){return o("gmap-marker",{key:n,attrs:{position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},clickable:!0,draggable:!1,icon:{url:e.getIcon(t.type?t.type[0]:0),scaledSize:e.selectedShop&&t.objectID===e.selectedShop.objectID?{width:67,height:79}:{width:55,height:65}}},on:{click:function(o){return e.markerClick(t,n)}}})}),e._v(" "),o("gmap-info-window",{staticStyle:{width:"100px"},attrs:{options:{pixelOffset:{width:5,height:-65}},opened:null!==e.selectedShop&&Object.getOwnPropertyNames(e.selectedShop).length>1,position:{lat:+e.selectedShop.latitude||0,lng:+e.selectedShop.longitude||0}},on:{closeclick:function(e){}}},[o("div",{staticClass:"info-window-container"},[o("span",{staticClass:"clear-info-window-button",on:{click:e.clearSelectedShop}},[e._v("✖")]),e._v(" "),e.selectedShop.photo0||e.selectedShop.facebook_avatar?o("ImageHandler",{attrs:{src:e.selectedShop.photo0||e.selectedShop.facebook_avatar,containerStyle:{width:"120px",height:"80px",overflow:"hidden",position:"relative"},alt:e.selectedShop.name,onClick:e.setShop}}):e._e(),e._v(" "),o("div",{staticStyle:{padding:"10px","min-width":"160px"}},[o("h1",{on:{click:e.setShop}},[o("a",{attrs:{href:"javascript:void"},on:{click:e.setShop}},[e._v(e._s(e.selectedShop.name))])]),e._v(" "),o("br"),e._v(" "),o("p",{staticStyle:{"margin-top":"5px","font-size":"14px"}},[e._l(e.selectedShop.type,function(t,n){return e.selectedShop.type&&e.types[e.selectedShop.type[0]]?o("span",[e._v(e._s(e.types[t].text+(n===e.selectedShop.type.length-1?"":", ")))]):e._e()}),e._v(" "),o("span",{staticStyle:{float:"right",color:"#4de680","font-weight":"bold"}},[e._v(e._s(e.selectedShop.open_status&&e.selectedShop.open_status.type?e.selectedShop.open_status.text:""))])],2)])],1)])],2)],1)],2)],1)],1)},[],!1,null,null,null);t.a=component.exports},732:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxLjYzNiA1MS42MzYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxLjYzNiA1MS42MzY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIGNsYXNzPSIiPjxnPjxwYXRoIGQ9Ik01MS4zNTMsMC45MTRjLTAuMjk1LTAuMzA1LTAuNzUtMC4zOS0xLjEzNS0wLjIxM0wwLjU4MywyMy40ODFjLTAuMzk5LDAuMTg0LTAuNjMyLDAuNjA1LTAuNTc0LDEuMDQxICBzMC4zOTMsMC43ODIsMC44MjYsMC44NTRsMjIuMjYzLDMuNzMxbDIuNTQ1LDIxLjAzOGMwLjA1NCwwLjQzOCwwLjM4OSwwLjc5MSwwLjgyNCwwLjg2NWMwLjA1NywwLjAxLDAuMTEzLDAuMDE1LDAuMTY5LDAuMDE1ICBjMC4zNzUsMCwwLjcyNi0wLjIxMSwwLjg5Ni0wLjU1NmwyNC00OC40MTVDNTEuNzIsMS42NzUsNTEuNjQ4LDEuMjE4LDUxLjM1MywwLjkxNHoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgZGF0YS1vbGRfY29sb3I9IiM0MjNlMzciIGZpbGw9IiM0MjNlMzciLz48L2c+IDwvc3ZnPgo="},733:function(e,t,n){"use strict";var o=n(664);n.n(o).a},734:function(e,t,n){(e.exports=n(39)(!1)).push([e.i,".expand-map-button-index{border:none;background-color:hsla(0,0%,100%,.9);color:grey;position:absolute;bottom:30px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:1;padding:5px 30px}body,html{overflow-y:hidden}.index-map{width:100%;height:calc(100vh - 60px)}.get-location-button{bottom:190px}.back-to-index-button,.get-location-button{position:absolute;right:10px;z-index:1;border:1px solid grey;width:45px;height:45px;padding:10px}.back-to-index-button{top:10px;background-color:#fff}.get-location-button img{width:100%;height:100%}.map-container h1{font-size:16px;font-weight:700;display:inline-block;margin-right:5px;margin-bottom:0;height:27px}.clear-info-window-button{position:absolute;top:5px;right:10px;font-weight:700;cursor:pointer}.address{margin:10px 0}.google-map-button{color:#44ad47;border-radius:5px;padding:5px 20px;border:1px solid;font-size:12px;display:block;margin:auto}.type{color:#9fa0a0;font-size:13px;margin:0}.map-container{padding:0;margin:60px 0 0;max-width:unset}.map-container>.row,.map-container>.row>div{margin:0;padding:0}p.recommend{color:#ee5593;font-weight:700;display:flex;align-items:center}.recommend img{width:unset;margin-right:5px}p.type{display:block;color:rgba(0,0,0,.4);font-size:13px}.info-window-container{display:flex;justify-content:space-between;margin-bottom:5px}.info-window-container h1{max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.info-window-container h1:hover{color:#44ad47}@media screen and (max-width:1250px){.index-map{height:calc(60vh - 116px)}.map-container{margin-top:116px}.get-location-button{top:10px;bottom:unset}}.gmap-info-window-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.gm-style-iw.gm-style-iw-c h1{font-size:20px}.gm-style-iw.gm-style-iw-c{padding:0;height:80px;font-family:微軟正黑體}",""])}}]);