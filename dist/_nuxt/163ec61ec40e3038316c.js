(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{581:function(t,e,o){var content=o(624);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(40).default)("3d6101da",content,!0,{sourceMap:!1})},600:function(t,e,o){var content=o(658);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(40).default)("794a7426",content,!0,{sourceMap:!1})},623:function(t,e,o){"use strict";var n=o(581);o.n(n).a},624:function(t,e,o){(t.exports=o(39)(!1)).push([t.i,".shopList{background-color:#f3f4f5;padding:0;transition:left 1s;overflow-y:auto;height:100%}.map-page-container #shopList-sidebar .content{height:calc(100vh - 110px)}.map-page-container #shopList-sidebar{height:calc(100vh - 110px);margin-top:60px}.no-result-placeholder{text-align:center}.no-result-placeholder img{width:30%;margin:0 auto 30px;display:block}@media screen and (max-width:1250px){.shopList{height:unset;padding:10px}.index-shop-list{margin-top:0!important}}",""])},629:function(t,e,o){"use strict";var n=o(607),r=o(598),l=o(584),c=o(588),d=o.n(c),h=o(589),f=o.n(h),m=o(590),x=o.n(m),v=o(591),y=o.n(v),w=o(592),_=o.n(w),k={components:{ShopItem:n.a,Sidebar:r.a},data:function(){return{mascots:[d.a,f.a,x.a,y.a,_.a]}},props:{show:{type:Boolean,default:!0},onCloseButtonClick:{type:Function,default:function(){}},shops:{type:Array,default:[]}},computed:{isLoading:function(){return this.$store.state.isLoading},selectedShop:function(){return this.$store.state.shop}},methods:{onScroll:Object(l.a)(function(t){var e=t.target;e.scrollTop>=e.scrollHeight-e.offsetHeight-500&&this.$store.state.pageNum<Math.ceil(this.shops.length/20)&&this.$store.commit("addPageNum")},1e3)}},S=(o(623),o(10)),component=Object(S.a)(k,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Sidebar",{attrs:{show:t.show,onCloseButtonClick:t.onCloseButtonClick,showCloseSidebarButton:!0,id:"shopList-sidebar"}},[t.shops.length>0?o("ul",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"}],staticClass:"shopList",attrs:{slot:"content"},slot:"content"},t._l(t.shops.slice(0,20*this.$store.state.pageNum),function(e,n){return o("ShopItem",{attrs:{shop:e,isMarkerClicked:e.objectID===t.selectedShop.objectID}})}),1):t._e(),t._v(" "),0===t.shops.length?o("div",{staticClass:"no-result-placeholder",attrs:{slot:"content"},slot:"content"},[o("img",{attrs:{src:t.mascots[Math.floor(Math.random()*t.mascots.length)]}}),t._v(" "),o("p",[t._v(t._s(t.isLoading?"Loading...":"目前沒有符合的搜尋結果"))])]):t._e()])},[],!1,null,null,null);e.a=component.exports},632:function(t){t.exports={}},647:function(t,e,o){"use strict";var n=o(584),r={computed:{typeOptions:function(){return this.$store.state.sourceData.types.filter(function(option){return option.checked})},query:function(){return this.$store.state.query},type:function(){return this.$store.state.type}},props:{hasMapButton:{type:Boolean,default:!0},hasQuery:{type:Boolean,default:!0},typesContainerClass:{type:String,default:""},showAllType:{type:Boolean,default:!0},containerClass:{type:String,default:""},onTypeClick:{type:Function,default:null},checkIfIsSelected:{type:Function,default:null},typeClass:{type:String,default:""}},methods:{checkIfIsSelectedFunc:function(t){return this.checkIfIsSelected?this.checkIfIsSelected(t):t.value?this.type[t.value]:0===this.type.filter(function(data){return data}).length},setType:Object(n.a)(function(t){this.$store.commit("setType",{type:t,isSingleSelection:"md"===this.$mq}),this.$store.dispatch("getShops")},500,{trailing:!1})}},l=(o(657),o(10)),component=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-filter-tab",class:t.containerClass},[t.hasQuery?n("span",[t._v(t._s(t.query||"零廢棄地圖綠點"))]):t._e(),t._v(" "),n("ul",{class:t.typesContainerClass},t._l(t.showAllType?t.typeOptions:t.typeOptions.slice(1),function(e,o){return n("li",{class:[e.class,t.checkIfIsSelectedFunc(e)?"selected-type":"",t.typeClass],style:"width: "+(t.showAllType?"16%":"19%"),attrs:{tabindex:"0"},on:{click:function(){t.onTypeClick?t.onTypeClick(e.value):t.setType(e.value)}}},[n("img",{attrs:{src:e.typeIcon}}),t._v("\n            "+t._s(e.text)+"\n        ")])}),0),t._v(" "),t.hasMapButton?n("nuxt-link",{attrs:{to:"/map"}},[n("button",[n("img",{attrs:{src:o(649),width:"40px"}})])]):t._e()],1)},[],!1,null,"40bf0449",null);e.a=component.exports},657:function(t,e,o){"use strict";var n=o(600);o.n(n).a},658:function(t,e,o){(t.exports=o(39)(!1)).push([t.i,".index-filter-tab[data-v-40bf0449]{display:flex;justify-content:space-between;align-items:center}.index-filter-tab span[data-v-40bf0449]{display:inline-block;width:10.5%;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.index-filter-tab li[data-v-40bf0449]{text-align:left;background-color:#fff;padding:5px 0;cursor:pointer}.index-filter-tab a[data-v-40bf0449]{width:60px;text-align:center;align-self:stretch}.index-filter-tab a button[data-v-40bf0449]{background-color:#fff;padding:5px;border:none;width:100%;height:100%}.index-filter-tab button[data-v-40bf0449]:hover{background-color:#2586db}.index-filter-tab .selected-type.type_all[data-v-40bf0449],.index-filter-tab .type_all[data-v-40bf0449]:hover{color:#fff;background-color:#2586db}.index-filter-tab .selected-type.type_vegetarian_shop[data-v-40bf0449],.index-filter-tab .type_vegetarian_shop[data-v-40bf0449]:hover{color:#fff;background-color:#22bf5d}.index-filter-tab .selected-type.type_thrift_shop[data-v-40bf0449],.index-filter-tab .type_thrift_shop[data-v-40bf0449]:hover{color:#fff;background-color:#2586db}.index-filter-tab .selected-type.type_free_shop[data-v-40bf0449],.index-filter-tab .type_free_shop[data-v-40bf0449]:hover{color:#fff;background-color:#f399cc}.index-filter-tab .selected-type.type_food_share[data-v-40bf0449],.index-filter-tab .type_food_share[data-v-40bf0449]:hover{color:#fff;background-color:#1db9be}.index-filter-tab .selected-type.type_food_bank[data-v-40bf0449],.index-filter-tab .type_food_bank[data-v-40bf0449]:hover{color:#fff;background-color:#f9892f}.index-filter-tab ul[data-v-40bf0449]{display:flex;justify-content:space-between;list-style-type:none;width:83.5%;margin-bottom:0}.index-filter-tab img[data-v-40bf0449]{width:37px}",""])},666:function(t,e,o){var content=o(739);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(40).default)("21036413",content,!0,{sourceMap:!1})},667:function(t,e,o){var content=o(741);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(40).default)("735187ca",content,!0,{sourceMap:!1})},690:function(t,e,o){"use strict";o(632);var n=o(597),r=o(629),l=o(607),c=o(598),d=o(588),h=o.n(d),f=o(589),m=o.n(f),x=o(590),v=o.n(x),y=o(591),w=o.n(y),_=o(592),k=o.n(_),S=o(584),C=0,$={components:{ShopItem:l.a,Sidebar:c.a},data:function(){return{mascots:[h.a,m.a,v.a,w.a,k.a],prevScrollTop:0}},props:{shops:{type:Array,default:[]}},computed:{isLoading:function(){return this.$store.state.isLoading},selectedShop:function(){return this.$store.state.shop}},methods:{onScroll:Object(S.a)(function(t){var e=t.target;e.scrollTop>=e.scrollHeight-e.offsetHeight-500&&this.$store.state.pageNum<Math.ceil(this.shops.length/20)&&this.$store.commit("addPageNum"),e.scrollTop>C&&window.scrollY<=.45*window.innerHeight?window.scrollTo({top:.45*window.innerHeight,behavior:"smooth"}):e.scrollTop>=e.scrollHeight-e.offsetHeight&&window.scrollTo({top:e.scrollTop,behavior:"smooth"}),C=e.scrollTop},1e3)}},L=(o(738),o(10)),T=Object(L.a)($,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"}],staticClass:"mobile mobile-shop-list"},[t.shops.length>0?o("ul",{staticClass:"shopList",attrs:{slot:"content"},slot:"content"},t._l(t.shops.slice(0,20*this.$store.state.pageNum),function(e,n){return o("ShopItem",{attrs:{shop:e,isMarkerClicked:e.objectID===t.selectedShop.objectID}})}),1):t._e(),t._v(" "),0===t.shops.length?o("div",{staticClass:"no-result-placeholder",attrs:{slot:"content"},slot:"content"},[o("img",{attrs:{src:t.mascots[Math.floor(Math.random()*t.mascots.length)]}}),t._v(" "),o("p",[t._v(t._s(t.isLoading?"Loading...":"目前沒有符合的搜尋結果"))])]):t._e()])},[],!1,null,null,null).exports,I=(o(622),o(101),o(587)),M=o(692),j=o(647),P={components:{Navbar:n.a,ShopList:r.a,ImageHandler:I.a,MobileShopList:T,Map:M.a,IndexFilterTab:j.a},data:function(){return{showShopList:!0}},computed:{shops:function(){return this.$store.state.shops},selectedShop:function(){return this.$store.state.shop},query:function(){return this.$state.state.query}},mounted:function(){this.$store.dispatch("getShops"),this.$store.dispatch("getUserLocation"),this.$store.state.userLocation&&this.$store.dispatch("getNearbyShops")},methods:{toggleShopList:function(){this.showShopList=!this.showShopList},setShop:function(){$nuxt.$router.push("/shop?objectID=".concat(this.selectedShop.objectID))},initPageNum:function(){this.$store.commit("initPageNum")}}},N=(o(740),Object(L.a)(P,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"map-page-container"},[o("Navbar"),t._v(" "),o("mq-layout",{attrs:{mq:"lg"}},[o("ShopList",{attrs:{show:t.showShopList,shops:t.shops,onCloseButtonClick:t.toggleShopList}})],1),t._v(" "),o("mq-layout",{attrs:{mq:"md"}},[o("MobileShopList",{attrs:{shops:t.shops}})],1),t._v(" "),o("Map",{attrs:{mapSettings:{zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0,disableDefaultUi:!1},backToIndexButtonClass:"mapPage-back-to-index-button"}},[o("mq-layout",{attrs:{mq:"md"}},[o("nuxt-link",{attrs:{to:"/index-map"}},[o("button",{staticClass:"expand-map-button-index mobile",on:{click:t.initPageNum}},[t._v("展開地圖")])])],1)],1)],1),t._v(" "),o("mq-layout",{staticClass:"mapPage-indexFilterTab-container",attrs:{mq:"lg"}},[o("IndexFilterTab",{attrs:{hasMapButton:!1,hasQuery:!1,typesContainerClass:"mapPage-type-container"}})],1)],1)},[],!1,null,null,null));e.a=N.exports},738:function(t,e,o){"use strict";var n=o(666);o.n(n).a},739:function(t,e,o){(t.exports=o(39)(!1)).push([t.i,".mobile-shop-list{position:absolute;top:60vh;max-height:100vh;min-height:50vh;overflow-y:auto;background-color:#f3f4f5;width:100%}.shopList{background-color:#f3f4f5;padding:0;transition:left 1s;overflow:auto}.no-result-placeholder{text-align:center}.mobile-shop-list .no-result-placeholder img{height:20vh;width:unset;margin:30px auto 20px;display:block}@media screen and (max-width:1250px){.shopList{height:unset;padding:10px}}",""])},740:function(t,e,o){"use strict";var n=o(667);o.n(n).a},741:function(t,e,o){(t.exports=o(39)(!1)).push([t.i,".expand-map-button-index{border:none;background-color:hsla(0,0%,100%,.9);color:grey;position:absolute;bottom:30px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:1;padding:5px 30px}body,html{overflow-y:hidden}.map-page-container{margin-top:50px}.map-page-container .map-container{margin-top:110px}.map-page-container .index-map{width:100%;height:calc(100vh - 110px)}p{margin:0}li{list-style-type:none}.mapPage-indexFilterTab-container{position:fixed;top:60px;left:0;width:100vw;background-color:#f3f4f5;padding:5px 10px}.mapPage-indexFilterTab-container .index-filter-tab{padding:5px 10px}.mapPage-indexFilterTab-container .index-filter-tab li img{height:30px}.mapPage-indexFilterTab-container .index-filter-tab span{line-height:px}.mapPage-type-container{width:calc(100% - 45px)!important}.mapPage-back-to-index-button{top:-43px}@media screen and (max-width:1250px){.map-page-container .index-map{height:calc(60vh - 116px)}body,html{overflow-y:visible;overflow-y:initial}.menu{display:none}.mapPage-back-to-index-button{top:10px}}",""])}}]);